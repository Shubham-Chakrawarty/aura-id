// TRACEABILITY: Temporary Intents (Email/Password Reset)

model VerificationToken {
  id         String   @id @default(cuid())
  type       String   // EMAIL_VERIFICATION, PASSWORD_RESET, etc.
  token      String   @unique
  identifier String   // EMAIL, PHONE, etc.
  userId     String?  @map("user_id")

  attempts   Int      @default(0)
  expiresAt  DateTime @map("expires_at")
  usedAt     DateTime? @map("used_at")
  createdAt  DateTime @default(now()) @map("created_at")

  user       User?    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([identifier, token])
  @@map("verification_tokens")
}