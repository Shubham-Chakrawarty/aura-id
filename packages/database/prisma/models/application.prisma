// SECURITY BOUNDARY: The "Country"

enum ApplicationStatus {
  ACTIVE
  SUSPENDED
  DEVELOPMENT
}

model Application {
  id          String  @id @default(cuid())
  name        String
  description String?
  logoUrl     String? @map("logo_url")

  // OAuth/OIDC Credentials
  clientId     String  @unique @default(uuid()) @map("client_id")
  clientSecret String? @map("client_secret") // Store as Argon2 hash

  // Security Configuration
  appType        String   @default("WEB") @map("app_type") // SPA, NATIVE, WEB, M2M
  redirectUris   String[] @map("redirect_uris")
  allowedOrigins String[] @map("allowed_origins")
  postLogoutUris String[] @map("post_logout_uris")
  homePageUrl    String?  @map("home_page_url")

  // Status
  status ApplicationStatus @default(DEVELOPMENT)

  // Lifecycle
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime  @updatedAt @map("updated_at")
  deletedAt DateTime? @map("deleted_at")

  // Relations
  sessions      Session[]
  memberships   ApplicationMembership[]
  refreshTokens RefreshToken[]

  @@map("applications")
}
